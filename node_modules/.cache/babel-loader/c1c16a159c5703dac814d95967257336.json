{"ast":null,"code":"import _toConsumableArray from\"/Users/aleksandrapetuhova/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/aleksandrapetuhova/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import PopupWithForm from\"./PopupWithForm\";import ImagePopup from\"./ImagePopup\";import React,{useState}from\"react\";import api from\"../utils/Api.js\";import Card from\"./Card\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setisAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setisEditAvatarPopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];function closeAllPopups(){setisEditAvatarPopupOpen(false);setisAddPlacePopupOpen(false);setIsEditProfilePopupOpen(false);setSelectedCard(null);}function handleCardClick(selectedCard){setSelectedCard(selectedCard);}function handleUpdateUser(data){api.setProfileData(data).then(function(profile){setCurrentUser(profile);closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});}function handleUpdateAvatar(data){api.setUserAvatar(data).then(function(profile){setCurrentUser(profile);closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,isLiked).then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id?c:null;});setCards(newCards);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});}function handleAddPlaceSubmit(data){api.setNewCards(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});}React.useEffect(function(){Promise.all([api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,1),cards=_ref2[0];setCards(cards);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});},[]);React.useEffect(function(){Promise.all([api.getProfileData()]).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),profile=_ref4[0];setCurrentUser(profile);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430; \".concat(err));});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:function onEditAvatar(){return setisEditAvatarPopupOpen(true);},onEditProfile:function onEditProfile(){return setIsEditProfilePopupOpen(true);},onAddPlace:function onAddPlace(){return setisAddPlacePopupOpen(true);},onCardClick:function onCardClick(selectedCard){return handleCardClick(selectedCard);},onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:function onClose(){return closeAllPopups(true);}})]})});}export default App;","map":{"version":3,"names":["Header","Main","Footer","PopupWithForm","ImagePopup","React","useState","api","Card","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setisAddPlacePopupOpen","isEditAvatarPopupOpen","setisEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","closeAllPopups","handleCardClick","handleUpdateUser","data","setProfileData","then","profile","catch","err","console","log","handleUpdateAvatar","setUserAvatar","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","newCards","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","setNewCards","useEffect","Promise","all","getInitialCards","getProfileData"],"sources":["/Users/aleksandrapetuhova/dev/react-mesto-auth/src/components/App.js"],"sourcesContent":["import Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport React, { useState } from \"react\";\nimport api from \"../utils/Api.js\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setisAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setisEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cards, setCards] = useState([]);\n  function closeAllPopups() {\n    setisEditAvatarPopupOpen(false);\n    setisAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard);\n  }\n\n\n  function handleUpdateUser(data) {\n    api.setProfileData(data).then((profile) => {\n      setCurrentUser(profile);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка; ${err}`);\n    });\n  }\n\n  function handleUpdateAvatar(data) {\n    api.setUserAvatar(data).then((profile) => {\n      setCurrentUser(profile);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка; ${err}`);\n    });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(`Ошибка; ${err}`);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(() => {\n      const newCards = cards.filter((c) => (c._id !== card._id ? c : null));\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(`Ошибка; ${err}`);\n    });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.setNewCards(data).then((newCard) =>{\n      setCards([newCard,...cards]);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка; ${err}`);\n    });\n  }\n\n  React.useEffect(() => {\n    Promise.all([api.getInitialCards()])\n      .then(([cards]) => {\n        setCards(cards);\n      })\n      .catch((err) => {\n        console.log(`Ошибка; ${err}`);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    Promise.all([api.getProfileData()])\n      .then(([profile]) => {\n        setCurrentUser(profile);\n      })\n      .catch((err) => {\n        console.log(`Ошибка; ${err}`);\n      });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          onEditAvatar={() => setisEditAvatarPopupOpen(true)}\n          onEditProfile={() => setIsEditProfilePopupOpen(true)}\n          onAddPlace={() => setisAddPlacePopupOpen(true)}\n          onCardClick={(selectedCard) => handleCardClick(selectedCard)}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          cards={cards}\n        />\n\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />  \n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        {/* \n    <PopupWithForm \n    name='popup_sure' \n    title='Обновить Вы уверены?' \n    submitname='Да'\n    isOpen={}\n    /> */}\n        <ImagePopup card={selectedCard} onClose={() => closeAllPopups(true)} />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}